import FreeQueue from"../../src/free-queue.js";import{FRAME_SIZE}from"./constants.js";self.onmessage=e=>{if("init"===e.data.type){let{inputQueue:t,outputQueue:o,atomicState:r}=e.data.data;Object.setPrototypeOf(t,FreeQueue.prototype),Object.setPrototypeOf(o,FreeQueue.prototype);const u=new Float32Array(FRAME_SIZE);for(;"ok"===Atomics.wait(r,0,0);){if(t.pull([u],FRAME_SIZE)){const e=u.map((e=>.1*e));o.push([e],FRAME_SIZE)}Atomics.store(r,0,0)}}};